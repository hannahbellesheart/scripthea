(()=>{var e={541:(e,t,o)=>{const n=o(624).urlCheck;function a(e){const t=window.location.href,o=n(t,e);return Boolean(o||new RegExp(e).exec(t))}function i(e){return"string"==typeof e?e:e?.length&&"string"==typeof e[0]?e[0]:""}e.exports={nodeGenerator:function(e,t){const o=n(window.location.href,"dcnode","variable");if(o)return o;const r=function(e){return(window.commercialNode||e.commercialNode||"politics").replace(/\s/g,"").replace(/^\/*|\/*$/g,"").replace(/[^0-9a-zA-Z_.\-/]/g,"")}(e),s=function(e){const t=i(e);return t&&{article:"article",audiostory:"audio",blogfront:"blog",blogstory:"blog",blog:"blog",front:"front",graphicstory:"graphic",mediagallery:"photo",gallery:"photo",videostory:"video"}[t.toLowerCase()]||""}(e.contentType),c=i(e.contentName);return e.isHomepage?t?"homepage":r:!s&&c&&c.length?`${r}/${c}`:"bytheway"===r?function(e){return a("/tips/")?`${e}/tips`:/\/travel\/[0-9]{4}\/[0-9]{2}\/[0-9]{2}\//i.test(window.location.href)?`${e}/news`:/\/travel\/(?!tips)(?!news)[^\d]/i.test(window.location.href)?`${e}/city-guides`:void 0}(r):s&&"article"!==s?function(e,t,o){return"blog"===e&&t&&t.length?`${o}/${e}/${t}`:"front"===e&&t&&t.length?`${o}/${t}/${e}`:`${o}/${e}`}(s,c,r):r},urlCheckAndParams:a}},491:(e,t,o)=>{const{loadScripts:n}=o(624);e.exports=class{constructor(e,t){this.kruxId=e,this.kruxId&&(this.namespace=t||"",this.kPrefix=this.namespace?`kx${this.namespace}_`:"kx",window.Krux||((window.Krux=function(){window.Krux.q.push(arguments)}).q=[]),n([`//cdn.krxd.net/controltag?confid=${this.kruxId}`]))}getValues(e){try{return window.localStorage.getItem(`${this.kPrefix}${e}`)||""}catch(e){return}}setKruxValues(){if(!Krux)return;Krux.user=this.getValues("user");const e=this.getValues("segs");return Krux.segments=e?e.split(","):[],{ksg:Krux.segments,kuid:Krux.user}}}},346:(e,t,o)=>{const n=o(624);e.exports=class{constructor(e){this.url=e}createUUID(){const e=n.generateUUID();return localStorage.setItem("uuid",e),e}buildQuery(){const e={cartaId:n.getCookie("wp_crtid"),loginId:n.getCookie("wapo_login_id"),j_ucid:localStorage.getItem("uuid")||this.createUUID()};return Object.keys(e).reduce(((t,o)=>e[o]?[...t,`${o}=${e[o]}`]:t),[]).join("&")}async getSegments(){try{const e=this.buildQuery(),t=await n.fetchData(`${this.url}?${e}`,{method:"GET"});if(!t||"object"!=typeof t)return null;let o={...t};return delete o.active_keys,o}catch(e){return null}}}},955:(e,t,o)=>{const n=o(624);e.exports=class{constructor(e,t,o){this.keyValues={},this.metaData=e,this.url=t,this.commercialNode=o,this.zeusAudience=n.isStorageAvailable()&&JSON.parse(localStorage.getItem("zeus_audience")||"{}")}j_tid(){const e=(window.j_tid?window.j_tid.toString():window.btoa(Date.now().toString()).replace(/=/gi,"")).toLowerCase(),t=n.safeGet(window,"google_tag_manager.GTM-WHNNX8B");this.keyValues.j_tid=e,window.j_tid=e,t&&window.dataLayer&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({j_tid:e}))}j_ucid(){window.dataLayer=window.dataLayer||[];let e=window.dataLayer.find((e=>e.j_ucid))?.j_ucid||localStorage.getItem("uuid");e||(e=n.generateUUID(),localStorage.setItem("uuid",e));const t=e.toString().toLowerCase();this.keyValues.j_ucid=t,window.dataLayer.push({j_ucid:t})}j_cid(){const e=n.getCookie("_ga");if(e&&/^GA1.2.[0-9]*[.][0-9]/.test(e)){const t=e.split(".").slice(-2).join(".");this.keyValues.j_cid=t}else window.ga=window.ga||function(){window.ga.q=window.ga.q||[],window.ga.q.push(arguments)},window.ga.l=+new Date,window.ga("create","UA-133956668-1","auto"),window.ga((e=>{const t=e.get("clientId");this.keyValues.j_cid=t}))}sub(){const e=n.getCookie("wapo_actmgmt");this.keyValues.sub=e&&e.indexOf("isub:1")>-1?"yes":e.indexOf("S:T")>-1?"terminated":"no"}addSegmentsToAux(e){const t=localStorage.getItem("usersegmentsAdops"),o=t?JSON.parse(t):{};for(const t in o)1===o[t]&&e.push(t)}getAuxMap(){return Array.isArray(this.zeusAudience?.ca)?this.zeusAudience.ca:localStorage.getItem("clavis.targeting")?JSON.parse(localStorage.getItem("clavis.targeting")).aux_map:localStorage.getItem("targeting_aux_map")?localStorage.getItem("targeting_aux_map").split(","):void 0}getContextualTargetingCa(){const e=n.safeGet(this.metaData,"contextualTargeting.active_keys",[]).filter((({key:e})=>"ca"===e))[0]||{values:[]};return Array.isArray(e.values)?e.values:[e.values]}ca(){if(!n.isStorageAvailable())return;const e=this.getAuxMap()||[],t=this.getContextualTargetingCa(),o=n.safeGet(this.metaData,"clavis.auxiliaries",[]),a=t.length>0?t:o,i=[...e.map((e=>e.toString().toLocaleLowerCase())),...a.map((e=>e.toString().toLocaleLowerCase()))];this.addSegmentsToAux(i),i.length&&(this.keyValues.ca=`true,${i}`)}wpnode(){this.metaData&&this.commercialNode&&(this.keyValues.wpnode=this.commercialNode)}ks(){this.keyValues.ks="1"}init(){return this.j_tid(),this.j_ucid(),this.j_cid(),this.sub(),this.ca(),this.wpnode(),this.ks(),this.keyValues}}},760:e=>{e.exports=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?o:3&o|8).toString(16)}))}},624:(e,t,o)=>{const n=o(760),{loadScript:a,getHeadElement:i}=o(741);function r(e,t=""){const o=`${document.cookie}`,n=`${e}=`;let a=0,i=0;return o.length>0&&(a=o.indexOf(n),-1!==a&&(a+=n.length,i=o.indexOf(";",a),-1===i&&(i=o.length),t=unescape(o.substring(a,i)))),t}e.exports={urlCheck:function(e,t,o){const n=("variable"===o?new RegExp(`[\\?&;]${t}=([^&#?]*)`):new RegExp(`[\\?&;](${t})[^=&#?]*`)).exec(e);return n?n[n.length-1]:void 0},loadScripts:function(e){const t=i();e.forEach((e=>{const o=window?.document?.querySelector(`script[src="${e}"]`);o||a({script:e,node:t})}))},setCookie:function(e,t,o,n,a,i){document.cookie=e+"="+escape(t)+(o?"; expires="+o:"")+(n?"; path="+n:"")+(a?"; domain="+a:"")+(i?"; secure":"")},getCookie:r,checkIsMobile:function(){return"1"===r("wp_devicetype")},safeGet:(e,t,o)=>t.split(".").reduce(((e,t)=>e&&e[t]?e[t]:o),e),isStorageAvailable:function(){const e="test";let t=!1;try{localStorage.setItem(e,e),localStorage.removeItem(e),t=!0}catch(e){t=!1}return t},generateUUID:n,fetchData:async function(e,t){const o=await fetch(e,t);return await o.json()},isAppClassicIos:function(){return navigator.userAgent.includes("Classic/")&&navigator.userAgent.includes("iOS/")}}},741:e=>{function t(){return window?.document?.head||window?.document?.getElementsByTagName("head")[0]}e.exports={loadScript:function({script:e,node:o,onload:n,onerror:a}){const i=o||t(),r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,n&&(r.onload=n),a&&(r.onerror=a),i.appendChild(r)},getHeadElement:t}}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}(()=>{const e=o(624),{nodeGenerator:t}=o(541),n=o(955),a=o(346),i=o(491);!async function(){const o=window.wp_meta_data||window.wpAdFusion?window.wp_meta_data||window.wpAdFusion:{},r=window.location.href,s=e.checkIsMobile(),c=t(o,s),u=`/701/${s?"mob.wp.":"wpni."}${c}`;let l=new n(o,r,c).init();window.zeusKeyvalues=l,window.zeusAdUnitPath=u;let d={};const g=e.urlCheck(window.location.href,"headerbid","variable"),w=e.getCookie("wp_geo").includes("|EEA");"off"===g||w||e.isAppClassicIos()||(d=new i("IbWIJ0xh","washingtonpost").setKruxValues()||{});const h=new a("https://audience.zeustechnology.com"),p=await h.getSegments()||{},x=p.ca;x&&(p.ca="true,"+x.join(",").slice(1,-1)),window.zeusKeyvalues={...window.zeusKeyvalues,...d,...p}}()})()})();